# Кодеки

## Введение

**Кодеки** - это классы отвечающие за то, в какой форме сервер и клиент будут обмениваться данными.

Каждое соединение TCPConnection использует **кодек**.

---
## Использование

Для предсказуемой работы, должен быть установлен один тип кодека:
- и для соедниения клиента
- и для соответствующего соединения на сервере.

Иначе обе стороны перестанут друг друга понимать, как в последнем случае:

![](/docs/connection-codecs.png)

Чтобы установить кодек для TCPClient используйте метод:
``` java
client.setCodec(CodecType); // Enum
client.setCodec(ConnectionCodec connectionCodec); // Существующие или свои реализации
```
То же для отдельных соединений TCPConnection.

Для TCPServer:
``` java
server.setCodecFactory(CodecType codecType); // Enum
server.setCodecFactory(ConnectionCodecFactory codecFactory); // Factory для существующих или своих реализаций
```

---
## Типы кодеков

В библиотеке есть следующие реализации:

| CodecType                    | Класс ConnectionCodec                                                                                  | Описание                                                                                                                                           |
|------------------------------|--------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------|
| **FRAMED**<br>(по умолчанию) | [`FramedConnectionCodec`](/src/main/java/generaloss/networkforge/tcp/codec/FramedConnectionCodec.java) | Перед фреймом ставится длина, появляются четкие границы сообщения. <br>Удобно для пакетных протоколов.                                             |
| **STREAM**                   | [`StreamConnectionCodec`](/src/main/java/generaloss/networkforge/tcp/codec/StreamConnectionCodec.java) | Читает всё что пришло, сообщение может быть прочитано по частям. <br>Удобен для стриминговых протоколов или уже существующих текстовых протоколов. |

---

*[Главная страница](index.md)*

*Следующая - [Пайплайн](pipeline.md)*